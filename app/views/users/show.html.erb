<% provide(:title, 'User Profile') %>
<h2>User Profile</h2>
<div class="row">
  <div class="span6">
    <p id="notice"> <%= notice %> </p>
    <% if @current_user != @user %>
	    <% if @current_user.friend_with? @user %>
	    	<%= link_to "Remove friend", friends_path(:user_id => @user.id), :method => "delete" %>
	    <% elsif @current_user.invited? @user %>
	    	Pending
	    <% else %>
	    	<%= link_to "Add friend", friends_path(:user_id => @user.id), :method => "post" %>
	    <% end %>
	<% else %>
	Pending Friend Invites:
	<table class="table table-striped table-bordered">
		<tr>
			<th>Username</th>
			<th>Confirmation</th>
		</tr>
		<% @current_user.pending_invited_by.each do |pending| %>
		<tr>
			<td class="span3" style="word-wrap:break-word"> <%= link_to User.find(pending.id).username, pending %> </td>
			<td class="span3" style="word-wrap:break-word"> <%= link_to "Confirm friend?", friend_path(pending.id), :method => "put" %> </td>
		</tr>
    	<% end %>

	</table>
	<% end %> 
    <h3>
      <!--<b>Title:</b> Use this instead for header-->
      <%= @user_profile.first_name + " " + @user_profile.last_name %>
    </h3>
    Friend List:

    <table class="table table-striped table-bordered">
    
		<tr>
			<th>Username</th>
		</tr>
    <% @friends.each do |friend| %>
    	<tr>
			<td class="span3" style="word-wrap:break-word"> <%= link_to User.find(friend.id).username, friend %> </td>
		</tr>
    <% end %>

	</table>

</div>
